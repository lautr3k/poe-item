import t from"dot-prop";var o=function(){this.locales={},this.locale=null};o.prototype.getLocale=function(){return this.locale},o.prototype.setLocale=function(t){this.locale=t},o.prototype.get=function(o,e){void 0===e&&(e=null),t.get(this.locales,o,e)},o.prototype.set=function(o,e){t.set(this.locales,o,e)},o.prototype.has=function(o){return t.has(this.locales,o)},o.prototype.delete=function(o){t.delete(this.locales,o)},o.prototype.localeKey=function(t,o){return void 0===o&&(o=null),(o||this.locale)+"."+t},o.prototype.__=function(o,e){void 0===e&&(e={});var n=this.localeKey(o);return function(t,o){var e;return Object.keys(o).forEach(function(n){t=t.replace(e="{{"+n+"}}",o[n]||e)}),t}(t.get(this.locales,n,n),e)};var e=new o,n=function(){for(var t=[],o=arguments.length;o--;)t[o]=arguments[o];return e.__.apply(e,t)},r=function(t){this.raw=(t||"").trim()};r.prototype.match=function(t,o){return void 0===o&&(o="gmi"),this.raw.match(new RegExp(t,o))||null},r.prototype.matchLine=function(t,o){return void 0===o&&(o="gmi"),this.match("^"+t+"$",o)},r.prototype.matchAll=function(t,o){void 0===o&&(o="gmi");var e=this.raw.matchAll(new RegExp(t,o));return e?[].concat(e):null},r.prototype.prop=function(t){var o=n(t),e=this.matchLine(o+" *([^:]+)?: *(.+)","mi");return e?{label:o,usLabel:t,labelExtra:e[1],value:e[2]}:null},r.prototype.toString=function(){return this.raw};var i=function(t){function o(){t.apply(this,arguments)}return t&&(o.__proto__=t),(o.prototype=Object.create(t&&t.prototype)).constructor=o,o}(r),u=function(t){function o(o){t.call(this,o),this.lines=this.raw.split(/\r?\n/).map(function(t){return new i(t)})}return t&&(o.__proto__=t),(o.prototype=Object.create(t&&t.prototype)).constructor=o,o.prototype.line=function(t){return this.lines[t-1]||new i},o}(r),l=function(t){function o(o){t.call(this,o),this.blocks=this.raw.split(/\r?\n--------\r?\n/).map(function(t){return new u(t)})}return t&&(o.__proto__=t),(o.prototype=Object.create(t&&t.prototype)).constructor=o,o.prototype.block=function(t){return this.blocks[t-1]||new u},o}(r),s=function(){};e.set("us",{Rarity:"Rarity"}),e.set("fr",{Rarity:"Raret√©"});var c=function(){this.__=n,this.i18n=e,this.modules={},this.modulesQueue=[],this.modulesDone=[],this.blocks=null,this.item=null,this.setup(""),this.init()};c.prototype.init=function(){throw new Error("You have to implement the method!")},c.prototype.parse=function(){throw new Error("You have to implement the method!")},c.prototype.setup=function(t){this.blocks=new l(t),this.item=new s,this.modulesDone=[]},c.prototype.bindModule=function(t,o){this.modulesQueue.push(t),this.modules[t]=o.bind(this)},c.prototype.runModule=function(t){if(this.modulesDone.includes(t))throw new Error("A module can only be run once: "+t+")");this.modulesDone.push(t),this.modules[t]()},c.prototype.runAllModules=function(){var t=this;this.modulesQueue.forEach(function(o){return t.runModule(o)})};var p=function(t){function o(){t.apply(this,arguments)}return t&&(o.__proto__=t),(o.prototype=Object.create(t&&t.prototype)).constructor=o,o.prototype.init=function(){console.log("init...")},o.prototype.parse=function(t){return this.setup(t),this.runAllModules(),console.log(this.blocks.prop("Rarity")),this.item},o}(c);export{p as ItemParser,e as i18n,n as __};
//# sourceMappingURL=poe-item.mjs.map
