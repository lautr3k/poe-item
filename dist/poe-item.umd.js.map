{"version":3,"file":"poe-item.umd.js","sources":["../src/i18n.js","../src/helpers/template.js","../src/ItemBlockBase.js","../src/ItemBlockLine.js","../src/ItemBlock.js","../src/ItemBlocks.js","../src/Item.js","../src/ItemParserBase.js","../locales/items.js","../src/helpers/capitalize.js","../src/helpers/escapeRegExp.js","../src/modules/getType.js","../src/helpers/removeParentheses.js","../src/modules/getStats.js","../src/helpers/camelize.js","../src/modules/index.js","../src/modules/getLocale.js","../src/modules/getRarity.js","../src/modules/getName.js","../src/modules/getLevel.js","../src/modules/isCorrupted.js","../src/modules/isUnidentified.js","../src/modules/isMetamorphSample.js","../src/modules/getUses.js","../src/modules/getWeapon.js","../src/modules/getQuality.js","../src/modules/getRequirements.js","../src/modules/getSockets.js","../src/ItemParser.js"],"sourcesContent":["import template from \"./helpers/template\";\r\nimport dotProp from \"dot-prop\";\r\n\r\nexport default class I18n {\r\n  constructor() {\r\n    this.locales = {};\r\n    this.locale = null;\r\n  }\r\n\r\n  getLocale() {\r\n    return this.locale;\r\n  }\r\n\r\n  getLocales() {\r\n    return Object.keys(this.locales);\r\n  }\r\n\r\n  setLocale(locale) {\r\n    this.locale = locale;\r\n  }\r\n\r\n  get(path, defaultValue = null) {\r\n    return dotProp.get(this.locales, path, defaultValue);\r\n  }\r\n\r\n  set(path, value) {\r\n    dotProp.set(this.locales, path, value);\r\n  }\r\n\r\n  has(path) {\r\n    return dotProp.has(this.locales, path);\r\n  }\r\n\r\n  delete(path) {\r\n    dotProp.delete(this.locales, path);\r\n  }\r\n\r\n  localeKey(path, locale = null) {\r\n    return `${locale || this.locale}.${path}`;\r\n  }\r\n\r\n  __(path, args = {}) {\r\n    const localKey = this.localeKey(path);\r\n    return template(this.get(localKey, path), args);\r\n  }\r\n}\r\n\r\nconst i18n = new I18n();\r\nconst __ = (...args) => i18n.__(...args);\r\n\r\nexport { I18n, i18n, __ };\r\n","export default function template(text, args) {\r\n  let tag, value;\r\n\r\n  Object.keys(args).forEach(arg => {\r\n    tag = `{{${arg}}}`;\r\n    value = args[arg] || tag;\r\n    text = text.replace(tag, value);\r\n  });\r\n\r\n  return text;\r\n}\r\n","import { __ } from \"./i18n\";\r\n\r\nexport default class ItemBlockBase {\r\n  constructor(raw) {\r\n    this.raw = (raw || \"\").trim();\r\n  }\r\n\r\n  get length() {\r\n    return this.raw.length;\r\n  }\r\n\r\n  match(pattern, flags = \"gmi\") {\r\n    return this.raw.match(new RegExp(pattern, flags)) || null;\r\n  }\r\n\r\n  matchLine(pattern, flags = \"gmi\") {\r\n    return this.match(`^${pattern}$`, flags);\r\n  }\r\n\r\n  matchAll(pattern, flags = \"gmi\") {\r\n    const matches = this.raw.matchAll(new RegExp(pattern, flags));\r\n    return matches ? [...matches] : null;\r\n  }\r\n\r\n  prop(usLabel) {\r\n    const label = __(usLabel);\r\n    const pattern = `${label} *([^:]+)?: *(.+)`;\r\n    const matches = this.matchLine(pattern, \"mi\");\r\n\r\n    if (!matches) {\r\n      return null;\r\n    }\r\n\r\n    let value = matches[2] ? matches[2].trim() : null;\r\n\r\n    return { label, usLabel, labelExtra: matches[1], value };\r\n  }\r\n\r\n  toString() {\r\n    return this.raw;\r\n  }\r\n}\r\n","import ItemBlockBase from \"./ItemBlockBase\";\r\n\r\nexport default class ItemBlockLine extends ItemBlockBase {}\r\n","import ItemBlockBase from \"./ItemBlockBase\";\r\nimport ItemBlockLine from \"./ItemBlockLine\";\r\n\r\nexport default class ItemBlock extends ItemBlockBase {\r\n  constructor(raw) {\r\n    super(raw);\r\n    this.lines = this.raw.split(/\\r?\\n/).map(line => new ItemBlockLine(line));\r\n  }\r\n\r\n  line(num) {\r\n    return this.lines[num - 1] || new ItemBlockLine();\r\n  }\r\n}\r\n","import ItemBlockBase from \"./ItemBlockBase\";\r\nimport ItemBlock from \"./ItemBlock\";\r\n\r\nexport default class ItemBlocks extends ItemBlockBase {\r\n  constructor(raw) {\r\n    super(raw);\r\n    this.blocks = this.raw\r\n      .split(/\\r?\\n--------\\r?\\n/)\r\n      .map(block => new ItemBlock(block));\r\n  }\r\n\r\n  block(block) {\r\n    return this.blocks[block - 1] || new ItemBlock();\r\n  }\r\n}\r\n","export default class Item {}\r\n","import { i18n, __ } from \"./i18n\";\r\nimport ItemBlocks from \"./ItemBlocks\";\r\nimport Item from \"./Item\";\r\n\r\nexport default class ItemParserBase {\r\n  constructor() {\r\n    this.__ = __;\r\n    this.i18n = i18n;\r\n    this.modules = {};\r\n    this.modulesQueue = [];\r\n    this.modulesDone = [];\r\n    this.blocks = null;\r\n    this.item = null;\r\n    this.setup(\"\");\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    throw new Error(\"You have to implement the method!\");\r\n  }\r\n\r\n  parse() {\r\n    throw new Error(\"You have to implement the method!\");\r\n  }\r\n\r\n  setup(raw) {\r\n    this.blocks = new ItemBlocks(raw);\r\n    this.item = new Item();\r\n    this.modulesDone = [];\r\n  }\r\n\r\n  bindModule(name, callback) {\r\n    if (this.modulesQueue.includes(name)) {\r\n      throw new Error(`A module can only be bind once: ${name})`);\r\n    }\r\n\r\n    this.modulesQueue.push(name);\r\n    this.modules[name] = callback.bind(this);\r\n  }\r\n\r\n  bindModules(modules) {\r\n    Object.entries(modules).forEach(module => this.bindModule(...module));\r\n  }\r\n\r\n  runModule(name) {\r\n    if (this.modulesDone.includes(name)) {\r\n      throw new Error(`A module can only be run once: ${name})`);\r\n    }\r\n\r\n    this.modulesDone.push(name);\r\n    this.modules[name]();\r\n  }\r\n\r\n  runAllModules() {\r\n    this.modulesQueue.forEach(name => this.runModule(name));\r\n  }\r\n\r\n  fatalError(message, args = {}) {\r\n    throw new Error(__(message, args));\r\n  }\r\n\r\n  undefinedProp(label) {\r\n    this.fatalError(\"undefinedProp: {{prop}}\", { prop: __(label) });\r\n  }\r\n}\r\n","import us from \"./us/items.json\";\r\nimport br from \"./br/items.json\";\r\nimport ru from \"./ru/items.json\";\r\nimport th from \"./th/items.json\";\r\nimport de from \"./de/items.json\";\r\nimport fr from \"./fr/items.json\";\r\nimport es from \"./es/items.json\";\r\nimport kr from \"./kr/items.json\";\r\n\r\nexport default { us, br, ru, th, de, fr, es, kr };\r\n","export default function capitalize(str) {\r\n  return str[0].toUpperCase() + str.slice(1);\r\n}\r\n","// https://stackoverflow.com/a/6969486\r\nexport default function escapeRegExp(string) {\r\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\r\n}\r\n","import categories from \"../../locales/items.js\";\r\nimport capitalize from \"../helpers/capitalize.js\";\r\nimport escapeRegExp from \"../helpers/escapeRegExp.js\";\r\n\r\nfunction cleanType(self) {\r\n  if (self.item.subCategory) {\r\n    const type = self.item.type.replace(self.item.subCategory, \"\");\r\n    self.item.type = type.length\r\n      ? capitalize(type.trim())\r\n      : self.item.subCategory;\r\n  }\r\n  if (self.item.subType) {\r\n    self.item.subType = self.item.subType\r\n      .split(\"  \")\r\n      .map(capitalize)\r\n      .join(\", \");\r\n  }\r\n}\r\n\r\nexport default function getType() {\r\n  const locale = this.i18n.getLocale();\r\n  const line = this.blocks.block(1).line(3);\r\n  const search = (line && line.toString()) || this.item.name;\r\n\r\n  let usCategory = null;\r\n\r\n  Object.entries(categories[locale]).find(([category, items]) => {\r\n    return items.find(item => {\r\n      if ([item.name, item.type].includes(search)) {\r\n        this.item.category = this.__(category);\r\n        this.item.subCategory = item.subCategory;\r\n        this.item.type = item.type;\r\n        delete this.item.subType;\r\n        usCategory = category;\r\n        cleanType(this);\r\n        return true;\r\n      }\r\n\r\n      // Other\r\n      const regexp = new RegExp(\r\n        `(.*)(${escapeRegExp(item.type)})(?:'s)?(.*)`,\r\n        \"i\"\r\n      );\r\n      const matches = search.match(regexp);\r\n\r\n      if (matches) {\r\n        const subType1 = matches[1];\r\n        const subType2 = matches[3];\r\n        this.item.category = this.__(category);\r\n        this.item.subCategory = item.subCategory;\r\n        this.item.type = item.type;\r\n        this.item.subType = capitalize([subType1, subType2].join(\"\").trim());\r\n        usCategory = category;\r\n        cleanType(this);\r\n      }\r\n    });\r\n  });\r\n\r\n  if (this.item.subType) {\r\n    this.item.subType = this.item.subType.replace(/[()]+/g, \"\").trim();\r\n  }\r\n\r\n  if (usCategory) {\r\n    this.item[`is${usCategory.replace(\" \", \"\")}`] = true;\r\n  }\r\n}\r\n","export default function removeParentheses(string) {\r\n  return string.replace(/^ *\\(|\\) *$/g, \"\");\r\n}\r\n","import removeParentheses from \"../helpers/removeParentheses\";\r\nimport camelize from \"../helpers/camelize\";\r\n\r\nconst numberPattern = \"[0-9]+(?:\\\\.[0-9]+)?\";\r\nconst typePattern = \"\\\\([^\\\\)]+\\\\)\";\r\nconst numberRegExp = new RegExp(\r\n  `^(${numberPattern})(%)?(?: (${typePattern}))?$`\r\n);\r\n\r\nfunction getRange(line) {\r\n  let subParts = line.trim().split(\" \");\r\n  let minMax = subParts[0].split(\"-\");\r\n  let type = subParts[1];\r\n\r\n  if (type) {\r\n    type = removeParentheses(type);\r\n  }\r\n\r\n  return {\r\n    min: parseInt(minMax[0]),\r\n    max: parseInt(minMax[1]),\r\n    unit: \"integer\",\r\n    type\r\n  };\r\n}\r\n\r\nfunction getState(self, block, label) {\r\n  const prop = block.prop(label);\r\n\r\n  if (!prop) {\r\n    return null;\r\n  }\r\n\r\n  if (!self.item.stats) {\r\n    self.item.stats = {};\r\n  }\r\n\r\n  const propName = camelize(prop.usLabel);\r\n  const matches = prop.value.match(numberRegExp);\r\n\r\n  if (matches) {\r\n    const value = parseFloat(matches[1]);\r\n    const unit = matches[2] ? \"percent\" : \"float\";\r\n    let type = matches[3];\r\n\r\n    if (type) {\r\n      type = removeParentheses(type);\r\n    }\r\n\r\n    self.item.stats[propName] = { value, unit, type };\r\n\r\n    return null;\r\n  }\r\n\r\n  const parts = prop.value.split(\",\");\r\n\r\n  if (parts.length === 1) {\r\n    self.item.stats[propName] = getRange(parts[0]);\r\n  } else {\r\n    self.item.stats[propName] = [];\r\n\r\n    parts.forEach(part => {\r\n      const state = getRange(part);\r\n      self.item.stats[propName].push(state);\r\n    });\r\n  }\r\n}\r\n\r\nfunction getElementalDamageTypes(self) {\r\n  if (!self.item.stats.elementalDamage) {\r\n    return null;\r\n  }\r\n\r\n  let elementalDamage = self.item.stats.elementalDamage;\r\n\r\n  if (!Array.isArray(elementalDamage)) {\r\n    elementalDamage = [elementalDamage];\r\n  }\r\n\r\n  const regexp = `^${self.__(\"regexp.elementalDamage\")}$`;\r\n  const matches = [...self.blocks.matchAll(regexp)];\r\n\r\n  // console.log(elementalDamage);\r\n  elementalDamage.forEach((damage, i) => {\r\n    damage.element = matches[i][3].toLowerCase();\r\n  });\r\n}\r\n\r\nexport default function getStats() {\r\n  const block = this.blocks.block(2);\r\n\r\n  if (!block) {\r\n    return null;\r\n  }\r\n\r\n  if (this.item.isWeapon) {\r\n    getState(this, block, \"Weapon Range\");\r\n    getState(this, block, \"Physical Damage\");\r\n    getState(this, block, \"Elemental Damage\");\r\n    getState(this, block, \"Chaos Damage\");\r\n    getState(this, block, \"Attacks per Second\");\r\n    getState(this, block, \"Critical Strike Chance\");\r\n    getElementalDamageTypes(this);\r\n    return null;\r\n  }\r\n\r\n  if (this.item.isArmour) {\r\n    getState(this, block, \"Armour\");\r\n    getState(this, block, \"Energy Shield\");\r\n    getState(this, block, \"Evasion Rating\");\r\n    getState(this, block, \"Chance to Block\");\r\n    return null;\r\n  }\r\n}\r\n","export default function camelize(string) {\r\n  return string\r\n    .toLowerCase()\r\n    .split(\" \")\r\n    .map((word, i) => {\r\n      return i ? word[0].toUpperCase() + word.slice(1) : word;\r\n    })\r\n    .join(\"\");\r\n}\r\n","import getLocale from \"./getLocale\";\r\nimport getRarity from \"./getRarity\";\r\nimport getName from \"./getName\";\r\nimport getLevel from \"./getLevel\";\r\nimport getType from \"./getType\";\r\nimport isCorrupted from \"./isCorrupted\";\r\nimport isUnidentified from \"./isUnidentified\";\r\nimport isMetamorphSample from \"./isMetamorphSample\";\r\nimport getUses from \"./getUses\";\r\nimport getWeapon from \"./getWeapon\";\r\nimport getQuality from \"./getQuality\";\r\nimport getRequirements from \"./getRequirements\";\r\nimport getStats from \"./getStats\";\r\nimport getSockets from \"./getSockets\";\r\n\r\nexport default {\r\n  getLocale,\r\n  getRarity,\r\n  getName,\r\n  getLevel,\r\n  getType,\r\n  isCorrupted,\r\n  isUnidentified,\r\n  isMetamorphSample,\r\n  getUses,\r\n  getWeapon,\r\n  getQuality,\r\n  getRequirements,\r\n  getStats,\r\n  getSockets\r\n};\r\n","export default function getLocale() {\r\n  const rarityLine = this.blocks.block(1).line(1);\r\n  const locales = this.i18n.getLocales();\r\n\r\n  const found = locales.find(locale => {\r\n    const rarityLabel = this.i18n.get(`${locale}.Rarity`, \"Rarity\");\r\n    const matches = rarityLine.match(`^${rarityLabel}:`);\r\n\r\n    if (matches) {\r\n      this.i18n.setLocale(locale);\r\n      this.item.locale = locale;\r\n      return true;\r\n    }\r\n  });\r\n\r\n  if (!found) {\r\n    this.fatalError(\"undefinedItemLocale: [{{locales}}]\", {\r\n      locales: locales.join()\r\n    });\r\n  }\r\n}\r\n","export default function getRarity() {\r\n  const rarity = this.blocks\r\n    .block(1)\r\n    .line(1)\r\n    .prop(\"Rarity\");\r\n\r\n  if (!rarity) {\r\n    this.undefinedProp(\"Rarity\");\r\n  }\r\n\r\n  this.item.rarity = rarity.value;\r\n}\r\n","export default function getName() {\r\n  const line = this.blocks.block(1).line(2);\r\n\r\n  if (!line.length) {\r\n    this.undefinedProp(\"Name\");\r\n  }\r\n\r\n  this.item.name = line.toString();\r\n}\r\n","export default function getLevel() {\r\n  const level = this.blocks.prop(\"Item Level\");\r\n\r\n  if (!level) {\r\n    return null;\r\n  }\r\n\r\n  this.item.level = parseInt(level.value);\r\n}\r\n","export default function isCorrupted() {\r\n  if (this.blocks.matchLine(this.__(\"Corrupted\"))) {\r\n    this.item.isCorrupted = true;\r\n  }\r\n}\r\n","export default function isUnidentified() {\r\n  if (this.blocks.matchLine(this.__(\"Unidentified\"))) {\r\n    this.item.isUnidentified = true;\r\n  } else {\r\n    this.item.isIdentified = true;\r\n  }\r\n}\r\n","import escapeRegExp from \"../helpers/escapeRegExp\";\r\n\r\nexport default function isMetamorphSample() {\r\n  const search = this.__(\"sentences.isMetamorphSample\");\r\n\r\n  if (this.blocks.matchLine(escapeRegExp(search))) {\r\n    this.item.isMetamorphSample = true;\r\n  }\r\n}\r\n","export default function getUses() {\r\n  const uses = this.blocks.prop(\"Uses\");\r\n\r\n  if (!uses) {\r\n    return null;\r\n  }\r\n\r\n  this.item.uses = uses.value;\r\n}\r\n","export default function getWeapon() {\r\n  if (this.item.isWeapon) {\r\n    const line = this.blocks.block(2).line(1);\r\n\r\n    if (!line.length) {\r\n      return null;\r\n    }\r\n\r\n    const oneHanded = this.__(\"One Handed\");\r\n    const twoHanded = this.__(\"Two Handed\");\r\n    const handsPattern = `${oneHanded}|${twoHanded}`;\r\n    const matches = line.match(`^(${handsPattern})?(?: ?)(.+)$`, \"i\");\r\n    const hands = matches[1] === twoHanded ? 2 : 1;\r\n    const type = matches[2];\r\n\r\n    this.item.weapon = { type, hands };\r\n  }\r\n}\r\n","import removeParentheses from \"../helpers/removeParentheses\";\r\n\r\nexport default function getQuality() {\r\n  const quality = this.blocks.block(2).prop(\"Quality\");\r\n\r\n  if (!quality) {\r\n    return null;\r\n  }\r\n\r\n  let parts = quality.value.split(\" \");\r\n  let value = parts.shift();\r\n  let type = parts.shift();\r\n\r\n  if (type) {\r\n    type = removeParentheses(type);\r\n  }\r\n\r\n  this.item.quality = {\r\n    value: parseInt(value),\r\n    source: quality.extra,\r\n    type\r\n  };\r\n}\r\n","export default function getRequirements() {\r\n  const block = this.blocks.block(3);\r\n  const firstLine = block.line(1);\r\n\r\n  if (!firstLine.length || !firstLine.match(`^${this.__(\"Requirements\")}:`)) {\r\n    return null;\r\n  }\r\n\r\n  this.item.requirements = {};\r\n\r\n  block.lines.slice(1).forEach(line => {\r\n    const parts = line.toString().split(\":\");\r\n    const label = this.__(`props.requirements.${parts[0]}`);\r\n    this.item.requirements[label] = parseInt(parts[1]);\r\n  });\r\n}\r\n","function parseColors(colors) {\r\n  const iterations = {};\r\n\r\n  colors.forEach(color => {\r\n    if (!iterations[color]) {\r\n      iterations[color] = 0;\r\n    }\r\n\r\n    iterations[color]++;\r\n  });\r\n\r\n  return iterations;\r\n}\r\n\r\nexport default function getSockets() {\r\n  const sockets = this.blocks.prop(\"Sockets\");\r\n\r\n  if (!sockets) {\r\n    return null;\r\n  }\r\n\r\n  let count = 0;\r\n  let links = 0;\r\n  let maxLinks = 0;\r\n  let groupsCount = 0;\r\n  let totalColors = {};\r\n\r\n  const groups = sockets.value.split(\" \").map(group => {\r\n    const colors = group.split(\"-\");\r\n    const colorsCount = parseColors(colors);\r\n    const groupLinks = colors.length - 1;\r\n\r\n    Object.entries(colorsCount).forEach(([key, val]) => {\r\n      if (totalColors[key]) {\r\n        totalColors[key] += val;\r\n      } else {\r\n        totalColors[key] = val;\r\n      }\r\n    });\r\n\r\n    maxLinks = Math.max(maxLinks, groupLinks);\r\n    count += colors.length;\r\n    links += groupLinks;\r\n    groupsCount++;\r\n\r\n    return { colors, colorsCount, links: groupLinks };\r\n  });\r\n\r\n  this.item.sockets = {\r\n    count,\r\n    links,\r\n    maxLinks,\r\n    colors: totalColors,\r\n    groupsCount,\r\n    groups\r\n  };\r\n}\r\n","import ItemParserBase from \"./ItemParserBase\";\r\nimport modules from \"./modules/\";\r\n\r\nimport us from \"../locales/us.json\";\r\nimport fr from \"../locales/fr.json\";\r\n\r\nexport default class ItemParser extends ItemParserBase {\r\n  constructor() {\r\n    super();\r\n\r\n    this.i18n.set(\"us\", us);\r\n    this.i18n.set(\"fr\", fr);\r\n\r\n    this.i18n.setLocale(\"us\");\r\n  }\r\n\r\n  init() {\r\n    this.bindModules(modules);\r\n  }\r\n\r\n  parse(raw) {\r\n    this.setup(raw);\r\n    this.runAllModules();\r\n    return this.item;\r\n  }\r\n}\r\n"],"names":["I18n","constructor","locales","locale","getLocale","this","getLocales","Object","keys","setLocale","get","path","defaultValue","dotProp","set","value","has","delete","localeKey","__","args","localKey","text","tag","forEach","arg","replace","template","i18n","ItemBlockBase","raw","trim","length","match","pattern","flags","RegExp","matchLine","matchAll","matches","prop","usLabel","label","labelExtra","toString","ItemBlockLine","ItemBlock","lines","split","map","line","num","ItemBlocks","blocks","block","Item","ItemParserBase","modules","modulesQueue","modulesDone","item","setup","init","Error","parse","bindModule","name","callback","includes","push","bind","bindModules","entries","module","runModule","runAllModules","fatalError","message","undefinedProp","capitalize","str","toUpperCase","slice","escapeRegExp","string","cleanType","self","subCategory","type","subType","join","removeParentheses","const","numberRegExp","getRange","subParts","minMax","min","parseInt","max","unit","getState","stats","propName","toLowerCase","word","i","parseFloat","parts","part","state","rarityLine","find","rarityLabel","rarity","level","search","usCategory","categories","category","regexp","subType1","subType2","isCorrupted","isUnidentified","isIdentified","isMetamorphSample","uses","isWeapon","oneHanded","twoHanded","weapon","quality","shift","source","extra","firstLine","requirements","elementalDamage","Array","isArray","damage","element","getElementalDamageTypes","isArmour","sockets","count","links","maxLinks","groupsCount","totalColors","groups","group","colors","colorsCount","iterations","color","parseColors","groupLinks","key","val","Math","us","fr"],"mappings":"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"}